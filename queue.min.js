(function(){function n(n){function e(){for(;i=a.length>d&&n>s;){var u=d++,e=a[u],o=t.call(e,1);o.push(r(u)),++s,a[u]=e[0].apply(null,o)}}function r(n){return function(u,t){--s,null==v&&(null!=u?o(u):(p[n]=t,--m?i||e():l()))}}function o(n){v=n,d=m=0/0,l()}function l(){null!=v?b(v):c?b(v,p):b.apply(null,[v].concat(p))}var f,i,c,a=[],p=[],d=0,s=0,m=0,v=null,b=u;return n||(n=1/0),f={defer:function(){return null==v&&(a.push(arguments),++m,e()),f},abort:function(){if(null==v){for(var n,u=d-s;d>u;++u)(n=a[u]).abort&&n.abort();o(Error("cancelled"))}return f},await:function(n){return b=n,c=!1,m||l(),f},awaitAll:function(n){return b=n,c=!0,m||l(),f}}}function u(){}var t=[].slice;n.version="1.0.7","function"==typeof define&&define.amd?define(function(){return n}):"object"==typeof module&&module.exports?module.exports=n:this.queue=n})();